<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="images/logo.avif" sizes="any">
    <link rel="icon" href="images/logo.avif"  sizes="16x16">
    <link rel="icon" href="images/logo.avif" sizes="32x32">
    <title>
        Confirmation
    </title>
    <meta name="description" content="Nous créons des sites web, applications mobiles et expériences digitales exceptionnelles qui génèrent des résultats.">
    <meta name="author" content="MPE Digital Solutions">
    <meta name="keywords" content="web development,mobile app development,digital marketing,SEO services,e-commerce solutions,UI/UX design,web design,digital agency,website development,online marketing">
    <meta name="creator" content="MPE Digital Solutions">
    <meta name="publisher" content="MPE DIGITAL SOLUTIONS">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://unpkg.com/scrollreveal"></script>
    <link rel="stylesheet" href="styles/index.css">
    <style>
     /* Conteneur des inputs */
#otp-inputs {
    display: flex;
    justify-content: center;
    gap: 8px; /* Espacement flexible */
    width: 100%;
    max-width: 400px; /* Largeur max sur PC */
    margin: 0 auto;
}

.otp-field {
    /* On enlève la largeur fixe */
    width: 100%; 
    max-width: 60px; /* Ne grandira pas plus que 60px */
    
    /* Carré parfait qui s'adapte à la largeur */
    aspect-ratio: 1 / 1.1; 
    
    padding: 0;
    text-align: center;
    font-size: clamp(1rem, 5vw, 1.5rem); /* Police qui rétrécit sur mobile */
    font-weight: bold;
    color: white !important;
    background: rgba(255, 255, 255, 0.05) !important;
    border: 2px solid rgba(255, 255, 255, 0.1) !important;
    border-radius: 10px;
    transition: all 0.2s ease;
}

/* Optimisation pour les très petits écrans (< 360px) */
@media (max-width: 360px) {
    #otp-inputs {
        gap: 4px;
    }
    .otp-field {
        border-radius: 8px;
        border-width: 1px;
    }
}


    
        .otp-field:focus {
            border-color: #2c64e3 !important;
            background: rgba(255, 255, 255, 0.1) !important;
            box-shadow: 0 0 15px rgba(44, 100, 227, 0.4) !important;
            transform: scale(1.05);
        }
    
        .transition-btn:hover {
            transform: translateY(-2px);
            filter: brightness(1.1);
        }
    
        /* Animation pour les erreurs */
        .shake {
            animation: shake 0.4s ease-in-out;
        }
    
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .card-body {
           height: auto;
        }

        /* Animation de rotation */
.spinner {
    display: inline-block;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Effet de tremblement (erreur) */
.shake {
    animation: shake 0.4s ease-in-out;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
}

/* Transition du bouton */
.transition-btn {
    transition: all 0.3s ease;
}

    </style>
   
</head>

<body>
    <main>
         
        <section class="min-vh-100 d-flex align-items-center  py-5 py-sm-2" style="background: radial-gradient(circle at top right, #2c64e3, #1a1a1a 50%);">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-12 col-md-10 col-lg-10 col-xl-10">
                        
                        <div class="card border-0 shadow-lg rounded-4 overflow-hidden" style="background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1) !important;">
                            
                            <div class="card-body p-4 p-md-5 text-center">
                                
                                <div class="mb-4">
                                    <div class="d-inline-flex align-items-center justify-content-center rounded-circle mb-3" 
                                         style="width: 70px; height: 70px; background: rgba(44, 100, 227, 0.2); border: 1px solid rgba(44, 100, 227, 0.4);">
                                        <i class="bi bi-envelope-check text-white fs-2"></i>
                                    </div>
                                    <h2 class="h4 fw-bold text-white mb-2">Vérifiez votre e-mail</h2>
                                    <p class="text-white-50 small">Entrez le code de vérification reçu par e-mail.</p>
                                </div>
        
                                <form id="otpForm">
                                    <div class="d-flex justify-content-between gap-1 gap-md-2 mb-4" id="otp-inputs">
                                        <input type="text" maxlength="1" class="form-control otp-field" pattern="\d*" inputmode="numeric" required>
                                        <input type="text" maxlength="1" class="form-control otp-field" pattern="\d*" inputmode="numeric" required>
                                        <input type="text" maxlength="1" class="form-control otp-field" pattern="\d*" inputmode="numeric" required>
                                        <input type="text" maxlength="1" class="form-control otp-field" pattern="\d*" inputmode="numeric" required>
                                        <input type="text" maxlength="1" class="form-control otp-field" pattern="\d*" inputmode="numeric" required>
                                        <input type="text" maxlength="1" class="form-control otp-field" pattern="\d*" inputmode="numeric" required>
                                    </div>
        
                                    <button type="submit" class="btn w-100 py-3 text-white fw-bold shadow-sm rounded-3 mb-4 transition-btn"
                                            style="background: linear-gradient(135deg, #2c64e3, #078251); border: none;">
                                        Confirmer le code
                                    </button>
                                </form>
        
                                <div class="text-center">
                                    <p class="text-white-50 small mb-0">Vous n'avez rien reçu ?</p>
                                    <button type="button" class="btn btn-link text-white fw-bold text-decoration-none p-0 small" id="resendBtn">
                                        Renvoyer un nouveau code
                                    </button>
                                </div>
        
                            </div>
                        </div>
        
                        <div class="text-center mt-4">
                            <a href="register.html" class="text-white-50 small text-decoration-none">
                                <i class="bi bi-arrow-left me-1"></i> Retour à la l'inscription
                            </a>
                        </div>
        
                    </div>
                </div>
            </div>
        </section>


    </main>

    <footer class="footer-modern position-relative overflow-hidden reveal-section-bottom  text-light">
        <div class="footer-top-border"></div>
    
        <div class="footer-bg-effects position-absolute inset-0">
            <div class="blob blob-center"></div>
            <div class="blob blob-top-right"></div>
            <div class="blob blob-bottom-left"></div>
        </div>
    
        <div class="container position-relative z-1 py-5">
            <section class="row gy-5 mb-5 border-bottom border-secondary pb-5">
                <div class="col-12 col-lg-6">
                    <a class="d-inline-block mb-3 text-decoration-none" href="/fr">
                        <h2 class="h3 fw-bold text-white mb-0">MPE DIGITAL SOLUTIONS</h2>
                    </a>
                    <p class="text-white small max-w-md">
                        Agence digitale de classe mondiale offrant des résultats exceptionnels
                    </p>
                    <div class="d-flex flex-wrap gap-2 mt-4 small text-primary">
                        <span>Afrique</span><span>•</span>
                        <span>Europe</span><span>•</span>
                        <span>Asie</span><span>•</span>
                        <span>Amérique du Sud</span><span>•</span>
                        <span>Amérique du Nord</span>
                    </div>
                </div>
    
                <div class="col-12 col-lg-6">
                    <div class="newsletter-card p-4 rounded-4 bg-dark-subtle">
                        <h4 class="h6 fw-bold text-white mb-2">Votre Newsletter</h4>
                        <p class="small text-white mb-4">
                            Inscrivez-vous à notre newsletter pour rester informé(e) des dernières tendances...
                        </p>
                        <form class="row g-2">
                            <div class="col-12 col-sm">
                                <input type="email" class="form-control form-control-dark" placeholder="E-mail" required>
                            </div>
                            <div class="col-12 col-sm-auto">
                                <button class="btn btn-primary px-4 w-100" type="submit">S'inscrire</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
    
            <section class="row gy-4 mb-5">
                <div class="col-6 col-md-4">
                    <h4 class="h6 fw-bold text-white mb-4">Nos Services</h4>
                    <ul class="list-unstyled d-grid gap-2">
                        <li><a href="/fr/services" class=" text-decoration-none hover-white">Web Development</a></li>
                        <li><a href="/fr/services/hosting" class=" text-decoration-none hover-white">Hebergement Web</a></li>
                        <li><a href="/fr/services/project-management" class=" text-decoration-none hover-white">Product Management</a></li>
                        <li><a href="/fr/services/digital-marketing" class=" text-decoration-none hover-white">Marketing</a></li>
                    </ul>
                </div>
                
                <div class="col-6 col-md-4">
                    <h4 class="h6 fw-bold text-white mb-4">Légal</h4>
                    <ul class="list-unstyled d-grid gap-2">
                        <li><a href="/fr/privacy" class=" text-decoration-none hover-white">Politique de Confidentialité</a></li>
                        <li><a href="/fr/terms" class=" text-decoration-none hover-white">Conditions d'Utilisation</a></li>
                    </ul>
                </div>
    
                <div class="col-12 col-md-4">
                    <h4 class="h6 fw-bold text-white mb-4">Contacts</h4>
                    <ul class="list-unstyled d-flex flex-column gap-3 small text-secondary">
                        <li>
                            <p class="text-white fw-medium mb-1" style="font-size: 0.75rem;">E-mail</p>
                            <a href="mailto:contact@mpedigitalsolutions.com" class="text-secondary text-decoration-none text-hover-white transition">
                                contact@mpedigitalsolutions.com
                            </a>
                        </li>
                    
                        <li>
                            <div class="mb-2">
                                <p class="text-white fw-medium mb-1" style="font-size: 0.75rem;">Yaoundé</p>
                                <p class="mb-1 " style="font-size: 0.75rem;">Nkoabang – Entrée Carrière (Yaoundé)</p>
                                <div class="d-flex flex-wrap gap-2 mt-1">
                                    <a href="https://wa.me/237640465182" class="d-flex align-items-center gap-1 text-decoration-none text-secondary text-hover-white transition" target="_blank">
                                        <i class="bi bi-whatsapp" style="color:#25D366"></i><span>640 46 51 82</span>
                                    </a>
                                    <a href="https://wa.me/237652799181" class="d-flex align-items-center gap-1 text-decoration-none text-secondary text-hover-white transition" target="_blank">
                                        <i class="bi bi-whatsapp" style="color:#25D366"></i><span>652 79 91 81</span>
                                    </a>
                                </div>
                            </div>
                        </li>
                    
                        <li>
                            <div class="mb-2">
                                <p class="text-white fw-medium mb-1" style="font-size: 0.75rem;">Douala</p>
                                <p class="mb-1 " style="font-size: 0.75rem;">Cité des palmiers</p>
                                <div class="d-flex flex-wrap gap-2 mt-1">
                                    <a href="https://wa.me/237657128712" class="d-flex align-items-center gap-1 text-decoration-none text-secondary text-hover-white transition" target="_blank">
                                        <i class="bi bi-whatsapp" style="color:#25D366"></i><span>657 12 87 12</span>
                                    </a>
                                    <a href="https://wa.me/237673071017" class="d-flex align-items-center gap-1 text-decoration-none text-secondary text-hover-white transition" target="_blank">
                                        <i class="bi bi-whatsapp" style="color:#25D366"></i><span>673 07 10 17</span>
                                    </a>
                                </div>
                            </div>
                        </li>
                    
                        <li>
                            <div class="mb-2">
                                <p class="text-white fw-medium mb-1" style="font-size: 0.75rem;">France</p>
                                <p class="mb-1 " style="font-size: 0.75rem;">91096, Paris, France</p>
                                <div class="d-flex flex-wrap gap-2 mt-1">
                                    <a href="https://wa.me/33638055446" class="d-flex align-items-center gap-1 text-decoration-none text-secondary text-hover-white transition" target="_blank">
                                        <i class="bi bi-whatsapp" style="color:#25D366"></i><span>+33 6 38 05 54 46</span>
                                    </a>
                                </div>
                            </div>
                        </li>
                    
                        <li class="d-flex align-items-center gap-2 text-secondary">
                            <i class="bi bi-clock" style="color:#25D366"></i>
                            <span>Lundi - Dimanche: 08h - 20h</span>
                        </li>
                    
                        <li>
                            <a class="d-flex align-items-center gap-2 text-decoration-none transition" href="/fr/contact">
                                <i class="bi bi-chat-dots" style="color:#25D366"></i>
                                <span class="fw-bold" style="color:#fe4438;">Start project →</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </section>
    
            <div class="border-top border-secondary pt-4">
                <div class="d-flex flex-column flex-md-row justify-content-between align-items-center gap-3 small text-white mb-4">
                    <p class="mb-0">© Copyright MPE DIGITAL SOLUTIONS. All Rights Reserved</p>
                    <p class="mb-0">Designed by MDS support</p>
                </div>
                
                <!-- <div class="d-flex flex-column flex-sm-row align-items-center justify-content-center gap-3 pt-4 border-top border-secondary border-opacity-25">
                    <span class="small text-muted fw-medium">Schéma de Couleurs:</span>
                    <button class="btn btn-outline-secondary btn-sm d-flex justify-content-between align-items-center gap-3 px-3 py-2" style="min-width: 120px;">
                        <span>Tech</span>
                        <i class="bi bi-chevron-down"></i>
                    </button>
                </div> -->
            </div>
        </div>
    
    
    
        <div class="fixed-bottom d-flex justify-content-end p-3 p-sm-4 pb-4 pe-4" style="z-index: 9999; pointer-events: none;">
            <button type="button" 
                    id="backToTop"
                    class="btn btn-primary rounded-circle shadow-lg" 
                    style="width: 50px; height: 50px; transition: all 0.3s ease; opacity: 0; visibility: hidden; pointer-events: auto;"
                    aria-label="Retour en haut">
                <i class="bi bi-arrow-up fs-4"></i>
            </button>
        </div>
    </footer>
    
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    
    <div id="google_translate_element" style="display:none;"></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Sélection unique des éléments
            const form = document.getElementById('otpForm');
            const inputs = document.querySelectorAll('.otp-field');
            const submitBtn = form.querySelector('button[type="submit"]');
            const userEmailSpan = document.querySelector('.text-white.fw-bold');
        
            // 2. Récupérer l'email stocké
            const email = localStorage.getItem('userEmail');
            if (email && userEmailSpan) {
                userEmailSpan.textContent = email;
            } else if (!email) {
                // Si pas d'email, on renvoie à l'inscription
                window.location.href = "register.html";
                return; // On arrête l'exécution ici
            }
        
            // Initialisation du bouton
            submitBtn.disabled = true;
            submitBtn.style.opacity = "0.7";
        
            // 3. Gestion des champs OTP (Focus et Validation)
            inputs.forEach((input, index) => {
                input.addEventListener('keyup', (e) => {
                    // Aller au suivant
                    if (e.key >= 0 && e.key <= 9) {
                        if (index < inputs.length - 1) inputs[index + 1].focus();
                    } 
                    // Retour au précédent
                    else if (e.key === 'Backspace') {
                        if (index > 0) inputs[index - 1].focus();
                    }
                    
                    // Vérifier si tous les champs sont remplis pour activer le bouton
                    const isComplete = Array.from(inputs).every(inp => inp.value !== "");
                    submitBtn.disabled = !isComplete;
                    submitBtn.style.opacity = isComplete ? "1" : "0.7";
                });
        
                // Force uniquement les chiffres
                input.addEventListener('input', () => {
                    input.value = input.value.replace(/[^0-9]/g, '');
                });
            });
        
            // 4. Soumission du formulaire
            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                let otpCode = "";
                inputs.forEach(input => otpCode += input.value);
                
                const originalText = submitBtn.innerHTML;
        
                try {
                    // --- ÉTAT : CHARGEMENT ---
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<i class="bi bi-arrow-repeat spinner"></i> Vérification...';
        
                    const response = await fetch('/api/verify', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            email: email, 
                            code: otpCode 
                        })
                    });
        
                    const result = await response.json();
        
                    if (response.ok && result.success) {
                        // --- ÉTAT : SUCCÈS ---
                        submitBtn.innerHTML = 'Compte vérifié <i class="bi bi-check-lg ms-2"></i>';
                        
                        setTimeout(() => {
                            localStorage.removeItem('userEmail');
                            window.location.href = "profil-client.html";
                        }, 1200);
        
                    } else {
                        // --- ÉTAT : ERREUR ---
                        submitBtn.innerHTML = originalText;
                        submitBtn.disabled = false;
                        form.classList.add('shake');
                        setTimeout(() => form.classList.remove('shake'), 400);
                        alert("❌ " + (result.message || result.error || "Code invalide"));
                    }
                } catch (err) {
                    console.error(err);
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    alert("Erreur de connexion au serveur.");
                }
            });
        });
        </script>                                                
    </body>
    </html>
    

</body>